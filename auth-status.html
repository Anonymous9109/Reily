<!DOCTYPE html>
<html>
<body>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCExki28m1NNepVQEIjmcQzR8z8O68LqIc",
  authDomain: "rinolski-notifications.firebaseapp.com",
  databaseURL: "https://rinolski-notifications-default-rtdb.firebaseio.com",
  projectId: "rinolski-notifications",
  storageBucket: "rinolski-notifications.firebasestorage.app",
  messagingSenderId: "355554579853",
  appId: "1:355554579853:web:3caa961653c0cdc0a359c4"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

// send login status and ID token to parent
auth.onAuthStateChanged(user => {
  if (user) {
    user.getIdToken(true).then(token => {
      window.parent.postMessage({
        loggedIn: true,
        email: user.email,
        token: token
      }, "*");
    });
  } else {
    window.parent.postMessage({ loggedIn: false }, "*");
  }
});
</script>
</body>
</html>
